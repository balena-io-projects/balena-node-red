FROM balenalib/%%BALENA_MACHINE_NAME%%-debian-node:12-stretch-run

RUN apt-get update && \
    apt-get install -yq --no-install-recommends \
                    pigpio \
                    python-pigpio && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# for pigpiod options see http://abyz.me.uk/rpi/pigpio/pigpiod.html
#    option -g will run the deamon in the foreground.
#    option -a 1 should assure that we are not using GPU memory.
CMD [ "/usr/bin/pigpiod", "-g" , "-a 1"]